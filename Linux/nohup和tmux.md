# nohupå’Œtmux

## nohup

### æ¦‚è¿°

**nohup** è‹±æ–‡å…¨ç§° `no hang up`ï¼ˆä¸æŒ‚èµ·ï¼‰ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œã€‚

**nohup** å‘½ä»¤ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ˆéé‡å®šå‘æ—¶ï¼‰ï¼Œä¼šè¾“å‡ºä¸€ä¸ªåå« `nohup.out` çš„æ–‡ä»¶åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œå¦‚æœå½“å‰ç›®å½•çš„ `nohup.out` æ–‡ä»¶ä¸å¯å†™ï¼Œè¾“å‡ºé‡å®šå‘åˆ° **$HOME/nohup.out** æ–‡ä»¶ä¸­ã€‚

**æ³¨æ„ï¼š**æˆ‘ä»¬ä½¿ç”¨sshè¿æ¥è¿›è¡Œç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå¦‚æœæ–­å¼€ç¨‹åºä¹Ÿæ˜¯ä¼šé€€å‡ºçš„ã€‚



### è¯­æ³•æ ¼å¼

```sh
 nohup Command [ Arg â€¦ ] [ã€€& ]
```

- **Command**ï¼šè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚
- **Arg**ï¼šä¸€äº›å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šè¾“å‡ºæ–‡ä»¶ã€‚
- **&**ï¼šè®©å‘½ä»¤åœ¨åå°æ‰§è¡Œï¼Œç»ˆç«¯é€€å‡ºåå‘½ä»¤ä»æ—§æ‰§è¡Œã€‚



**æ³¨æ„ï¼š**æˆ‘ä»¬ä½¿ç”¨

```
nohup python -u
```

çš„æ—¶å€™,-u ä»£è¡¨ç¨‹åºä¸å¯ç”¨ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æŠŠè¾“å‡ºç›´æ¥æ”¾åˆ°logä¸­ï¼Œæ²¡è¿™ä¸ªå‚æ•°çš„è¯ï¼Œlogæ–‡ä»¶çš„ç”Ÿæˆä¼šæœ‰å»¶è¿Ÿ



### é‡å®šå‘

ä»¥ä¸‹å‘½ä»¤åœ¨åå°æ‰§è¡Œ` root `ç›®å½•ä¸‹çš„ `runoob.sh` è„šæœ¬ï¼Œå¹¶é‡å®šå‘è¾“å…¥åˆ° `runoob.log `æ–‡ä»¶ï¼š

```
nohup /root/runoob.sh > runoob.log 2>&1 &
```

**2>&1** è§£é‡Šï¼š

å°†æ ‡å‡†é”™è¯¯ 2 é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º &1 ï¼Œæ ‡å‡†è¾“å‡º &1 å†è¢«é‡å®šå‘è¾“å…¥åˆ° `runoob.log `æ–‡ä»¶ä¸­ã€‚

- 0 â€“ `stdin` (standard inputï¼Œæ ‡å‡†è¾“å…¥)
- 1 â€“ `stdout` (standard outputï¼Œæ ‡å‡†è¾“å‡º)
- 2 â€“ `stderr` (standard errorï¼Œæ ‡å‡†é”™è¯¯è¾“å‡º)



### åœæ­¢è¿è¡Œ

å¦‚æœè¦åœæ­¢è¿è¡Œï¼Œä½ éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾åˆ° `nohup` è¿è¡Œè„šæœ¬åˆ° `PID`ï¼Œç„¶åä½¿ç”¨ kill å‘½ä»¤æ¥åˆ é™¤ï¼š

```sh
ps -aux | grep "runoob.sh" 
```

- **a** : æ˜¾ç¤ºæ‰€æœ‰ç¨‹åº
- **u** : ä»¥ç”¨æˆ·ä¸ºä¸»çš„æ ¼å¼æ¥æ˜¾ç¤º
- **x** : æ˜¾ç¤ºæ‰€æœ‰ç¨‹åºï¼Œä¸åŒºåˆ†ç»ˆç«¯æœº

æ‰¾åˆ° `PID` åï¼Œå°±å¯ä»¥ä½¿ç”¨ `kill PID `æ¥åˆ é™¤ã€‚

```sh
kill -9  è¿›ç¨‹å·PID
```



## tmux



### æ¦‚è¿°

æœ€è¿‘ä½¿ç”¨nohupè¿›è¡ŒDDPè®­ç»ƒï¼Œç»“æœä¸çŸ¥é“æ˜¯torchç‰ˆæœ¬é—®é¢˜å¯¼è‡´ä¸ç¨³å®šè¿˜æ˜¯nohupè®­ç»ƒä¸ç¨³å®šï¼Œæ‰€ä»¥çœ‹åˆ°äº†tmuxè¿™ä¸ªæŒ‡ä»¤ï¼Œåƒå‘ç°äº†æ–°å¤§é™†ä¸€æ ·ã€‚



å‘½ä»¤è¡Œçš„å…¸å‹ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ˆterminal windowï¼Œä»¥ä¸‹ç®€ç§°"çª—å£"ï¼‰ï¼Œåœ¨é‡Œé¢è¾“å…¥å‘½ä»¤ã€‚**ç”¨æˆ·ä¸è®¡ç®—æœºçš„è¿™ç§ä¸´æ—¶çš„äº¤äº’ï¼Œç§°ä¸ºä¸€æ¬¡"ä¼šè¯"ï¼ˆsessionï¼‰** ã€‚

ä¼šè¯çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ï¼Œçª—å£ä¸å…¶ä¸­å¯åŠ¨çš„è¿›ç¨‹æ˜¯è¿åœ¨ä¸€èµ·çš„ã€‚æ‰“å¼€çª—å£ï¼Œä¼šè¯å¼€å§‹ï¼›å…³é—­çª—å£ï¼Œä¼šè¯ç»“æŸï¼Œä¼šè¯å†…éƒ¨çš„è¿›ç¨‹ä¹Ÿä¼šéšä¹‹ç»ˆæ­¢ï¼Œä¸ç®¡æœ‰æ²¡æœ‰è¿è¡Œå®Œã€‚

ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯ï¼ŒSSH ç™»å½•è¿œç¨‹è®¡ç®—æœºï¼Œæ‰“å¼€ä¸€ä¸ªè¿œç¨‹çª—å£æ‰§è¡Œå‘½ä»¤ã€‚è¿™æ—¶ï¼Œç½‘ç»œçªç„¶æ–­çº¿ï¼Œå†æ¬¡ç™»å½•çš„æ—¶å€™ï¼Œæ˜¯æ‰¾ä¸å›ä¸Šä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„ã€‚å› ä¸ºä¸Šä¸€æ¬¡ SSH ä¼šè¯å·²ç»ç»ˆæ­¢äº†ï¼Œé‡Œé¢çš„è¿›ç¨‹ä¹Ÿéšä¹‹æ¶ˆå¤±äº†ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¼šè¯ä¸çª—å£å¯ä»¥"è§£ç»‘"ï¼šçª—å£å…³é—­æ—¶ï¼Œä¼šè¯å¹¶ä¸ç»ˆæ­¢ï¼Œè€Œæ˜¯ç»§ç»­è¿è¡Œï¼Œç­‰åˆ°ä»¥åéœ€è¦çš„æ—¶å€™ï¼Œå†è®©ä¼šè¯"ç»‘å®š"å…¶ä»–çª—å£ã€‚



### åŸºæœ¬ä½¿ç”¨

* å¯åŠ¨å’Œé€€å‡º

```bash
tmux  #å¯åŠ¨tmuxçª—å£ åº•éƒ¨æœ‰ä¸€ä¸ªçŠ¶æ€æ ã€‚çŠ¶æ€æ çš„å·¦ä¾§æ˜¯çª—å£ä¿¡æ¯ï¼ˆç¼–å·å’Œåç§°ï¼‰ï¼Œå³ä¾§æ˜¯ç³»ç»Ÿä¿¡æ¯ã€‚
exit
```

* å¿«æ·é”®

å¿«æ·é”®éƒ½æ˜¯ç”¨`Ctrl+b`ä½œä¸ºå‰ç¼€ï¼Œ

ä¸‹é¢æ˜¯ä¸€äº›ä¼šè¯ç›¸å…³çš„å¿«æ·é”®ã€‚

> - `Ctrl+b d`ï¼šåˆ†ç¦»å½“å‰ä¼šè¯ã€‚
> - `Ctrl+b s`ï¼šåˆ—å‡ºæ‰€æœ‰ä¼šè¯ã€‚
> - `Ctrl+b $`ï¼šé‡å‘½åå½“å‰ä¼šè¯ã€‚

**æ³¨æ„**ï¼šåº”è¯¥å…ˆæŒ‰ä½`ctrl+b`ï¼Œæ”¾å¼€åå†æŒ‰å…¶ä»–é”®æ‰ç”Ÿæ•ˆ

### è®°å½•æ—¥å¿—

```sh
script -f a.log   #å°†å½“å‰ä¼šè¯æ‰“å°ä¿¡æ¯è¾“å‡ºåˆ°a.logæ–‡ä»¶ä¸­

exit           #ç»“æŸä¿å­˜æ—¥å¿—
```

ç›®å‰é‡åˆ°çš„é—®é¢˜æ˜¯å¼€å¯äº†è¿™ä¸ªè®°å½•æ—¥å¿—ï¼Œ`conda`çš„ç¯å¢ƒå°±ä¼šå¤±æ•ˆã€‚

[linuxä¸­è¿è¡Œtmuxæ—¶ï¼Œè‡ªåŠ¨ä¿å­˜æ—¥å¿—_tmuxæ€ä¹ˆä¿å­˜_Liucxxçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_43819842/article/details/125441651)



**tee**å‘½ä»¤ä¹Ÿå¯ä»¥ç›´æ¥è®°å½•æ—¥å¿—

å¦‚æœæƒ³åŒæ—¶æ‰“å°åˆ°å±å¹•å’Œæ–‡ä»¶é‡Œï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š

```sh
ls -l | tee -a lsls.log #-aæ˜¯åœ¨æ–‡ä»¶åæ·»åŠ ï¼Œä¸åŠ å°±æ˜¯è¦†ç›–
```

å¦‚æœæƒ³æŠŠé”™è¯¯è¾“å‡ºä¹ŸåŒæ—¶æ‰“å°åˆ°å±å¹•å’Œæ–‡ä»¶ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š

```sh
ls -l not_find_runoob 2>&1 | tee -a lsls.log
```

å…¶ä¸­ï¼Œ`2>&1` æ„æ€å°±æ˜¯æŠŠæ ‡å‡†æŠ¥é”™ä¹Ÿä½œä¸ºæ ‡å‡†è¾“å‡ºã€‚

å¯ä»¥åœ¨åˆ†ç¦»çš„tmuxä¼šè¯ä¸­è¿è¡Œè„šæœ¬ï¼Œå¹¶å°†stdoutå’Œstderrè®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```sh
tmux new -d 'script.sh |& tee tmux.log'
```

`-d` å‚æ•°æ˜¯ tmux å‘½ä»¤çš„ä¸€ä¸ªé€‰é¡¹ï¼Œè¡¨ç¤ºåœ¨åå°åˆ›å»ºä¼šè¯ã€‚ä½¿ç”¨ `-d` å‚æ•°å¯ä»¥åœ¨åˆ›å»ºä¼šè¯åç«‹å³è¿”å›åˆ°åŸæ¥çš„ç»ˆç«¯ï¼Œè€Œä¸ä¼šè¿›å…¥æ–°åˆ›å»ºçš„ä¼šè¯ã€‚è¿™æ ·å¯ä»¥åœ¨åå°æ‰§è¡Œå‘½ä»¤æˆ–è„šæœ¬ï¼Œè€Œä¸ä¼šå½±å“å½“å‰ç»ˆç«¯çš„ä½¿ç”¨ã€‚

ä¹Ÿå¯ä»¥è¿›å…¥tmuxä¼šè¯ä¸­ï¼Œä½¿ç”¨teeå‘½ä»¤

```
./my_script.sh |& tee /path/to/script_output.log
```



### ä¼šè¯ç®¡ç†

* æ–°å»ºä¼šè¯

ç¬¬ä¸€ä¸ªå¯åŠ¨çš„ Tmux çª—å£ï¼Œç¼–å·æ˜¯`0`ï¼Œç¬¬äºŒä¸ªçª—å£çš„ç¼–å·æ˜¯`1`ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›çª—å£å¯¹åº”çš„ä¼šè¯ï¼Œå°±æ˜¯ 0 å·ä¼šè¯ã€1 å·ä¼šè¯ã€‚

ä½¿ç”¨ç¼–å·åŒºåˆ†ä¼šè¯ï¼Œä¸å¤ªç›´è§‚ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯ä¸ºä¼šè¯èµ·åã€‚

```bash
tmux new -s <session-name>
```

* åˆ†ç¦»ä¼šè¯

åœ¨ Tmux çª—å£ä¸­ï¼ŒæŒ‰ä¸‹`Ctrl+b d`æˆ–è€…è¾“å…¥`tmux detach`å‘½ä»¤ï¼Œå°±ä¼šå°†å½“å‰ä¼šè¯ä¸çª—å£åˆ†ç¦»ã€‚

```bash
tmux detach
```

ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œå°±ä¼šé€€å‡ºå½“å‰ Tmux çª—å£ï¼Œä½†æ˜¯ä¼šè¯å’Œé‡Œé¢çš„è¿›ç¨‹ä»ç„¶åœ¨åå°è¿è¡Œã€‚

* æŸ¥çœ‹ä¼šè¯

```sh
tmux ls
```

* æ¥å…¥ä¼šè¯

`tmux attach`å‘½ä»¤ç”¨äºé‡æ–°æ¥å…¥æŸä¸ªå·²å­˜åœ¨çš„ä¼šè¯ã€‚

```bash
# ä½¿ç”¨ä¼šè¯ç¼–å·
tmux attach -t 0

# ä½¿ç”¨ä¼šè¯åç§°
tmux attach -t <session-name>
```

* æ€æ­»ä¼šè¯

```bash
# ä½¿ç”¨ä¼šè¯ç¼–å·
tmux kill-session -t 0

# ä½¿ç”¨ä¼šè¯åç§°
tmux kill-session -t <session-name>
```

* åˆ‡æ¢ä¼šè¯

```sh
# ä½¿ç”¨ä¼šè¯ç¼–å·
tmux switch -t 0

# ä½¿ç”¨ä¼šè¯åç§°
tmux switch -t <session-name>
```

* é‡å‘½å

```sh
tmux rename-session -t 0 <new-name>
```



### ä½¿ç”¨æµç¨‹

1. æ–°å»ºä¼šè¯`tmux new -s my_session`ã€‚
2. åœ¨ Tmux çª—å£è¿è¡Œæ‰€éœ€çš„ç¨‹åºã€‚
3. æŒ‰ä¸‹å¿«æ·é”®`Ctrl+b d`å°†ä¼šè¯åˆ†ç¦»ã€‚
4. ä¸‹æ¬¡ä½¿ç”¨æ—¶ï¼Œé‡æ–°è¿æ¥åˆ°ä¼šè¯`tmux attach-session -t my_session`ã€‚



### çª—æ ¼æ“ä½œ

Tmux å¯ä»¥å°†çª—å£åˆ†æˆå¤šä¸ªçª—æ ¼ï¼ˆpaneï¼‰ï¼Œæ¯ä¸ªçª—æ ¼è¿è¡Œä¸åŒçš„å‘½ä»¤ã€‚ä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯åœ¨ Tmux çª—å£ä¸­æ‰§è¡Œã€‚

* åˆ’åˆ†çª—æ ¼

```bash
# åˆ’åˆ†ä¸Šä¸‹ä¸¤ä¸ªçª—æ ¼
tmux split-window

# åˆ’åˆ†å·¦å³ä¸¤ä¸ªçª—æ ¼
tmux split-window -h
```

* ç§»åŠ¨å…‰æ ‡

```bash
# å…‰æ ‡åˆ‡æ¢åˆ°ä¸Šæ–¹çª—æ ¼
tmux select-pane -U

# å…‰æ ‡åˆ‡æ¢åˆ°ä¸‹æ–¹çª—æ ¼
tmux select-pane -D

# å…‰æ ‡åˆ‡æ¢åˆ°å·¦è¾¹çª—æ ¼
tmux select-pane -L

# å…‰æ ‡åˆ‡æ¢åˆ°å³è¾¹çª—æ ¼
tmux select-pane -R
```

* äº¤æ¢çª—æ ¼ä½ç½®

```bash
# å½“å‰çª—æ ¼ä¸Šç§»
tmux swap-pane -U

# å½“å‰çª—æ ¼ä¸‹ç§»
tmux swap-pane -D
```

* çª—æ ¼å¿«æ·é”®

1. `Ctrl+b %`ï¼šåˆ’åˆ†å·¦å³ä¸¤ä¸ªçª—æ ¼ï¼Œæˆ–è€…`Ctrl+b v`ã€‚
2. `Ctrl+b "`ï¼šåˆ’åˆ†ä¸Šä¸‹ä¸¤ä¸ªçª—æ ¼ã€‚
3. `Ctrl+b <arrow key>`ï¼šå…‰æ ‡åˆ‡æ¢åˆ°å…¶ä»–çª—æ ¼ã€‚`<arrow key>`æ˜¯æŒ‡å‘è¦åˆ‡æ¢åˆ°çš„çª—æ ¼çš„æ–¹å‘é”®ï¼Œæ¯”å¦‚åˆ‡æ¢åˆ°ä¸‹æ–¹çª—æ ¼ï¼Œå°±æŒ‰æ–¹å‘é”®`â†“`ã€‚
4. `Ctrl+b ;`ï¼šå…‰æ ‡åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—æ ¼ã€‚
5. `Ctrl+b o`ï¼šå…‰æ ‡åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—æ ¼ã€‚
6. `Ctrl+b {`ï¼šå½“å‰çª—æ ¼ä¸ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®ã€‚
7. `Ctrl+b }`ï¼šå½“å‰çª—æ ¼ä¸ä¸‹ä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®ã€‚
8. `Ctrl+b Ctrl+o`ï¼šæ‰€æœ‰çª—æ ¼å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œç¬¬ä¸€ä¸ªçª—æ ¼å˜æˆæœ€åä¸€ä¸ªçª—æ ¼ã€‚
9. `Ctrl+b Alt+o`ï¼šæ‰€æœ‰çª—æ ¼å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œæœ€åä¸€ä¸ªçª—æ ¼å˜æˆç¬¬ä¸€ä¸ªçª—æ ¼ã€‚
10. `Ctrl+b x`ï¼šå…³é—­å½“å‰çª—æ ¼ã€‚
11. `Ctrl+b !`ï¼šå°†å½“å‰çª—æ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªç‹¬ç«‹çª—å£ã€‚
12. `Ctrl+b z`ï¼šå½“å‰çª—æ ¼å…¨å±æ˜¾ç¤ºï¼Œå†ä½¿ç”¨ä¸€æ¬¡ä¼šå˜å›åŸæ¥å¤§å°ã€‚
13. `Ctrl+b Ctrl+<arrow key>`ï¼šæŒ‰ç®­å¤´æ–¹å‘è°ƒæ•´çª—æ ¼å¤§å°ã€‚
14. `Ctrl+b q`ï¼šæ˜¾ç¤ºçª—æ ¼ç¼–å·ã€‚



### çª—æ ¼ç®¡ç†

é™¤äº†å°†ä¸€ä¸ªçª—å£åˆ’åˆ†æˆå¤šä¸ªçª—æ ¼ï¼ŒTmux ä¹Ÿå…è®¸æ–°å»ºå¤šä¸ªçª—å£ã€‚

* æ–°å»ºçª—å£

```bash
tmux new-window

# æ–°å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„çª—å£
tmux new-window -n <window-name>
```

* åˆ‡æ¢çª—å£

```bash
# åˆ‡æ¢åˆ°æŒ‡å®šç¼–å·çš„çª—å£
tmux select-window -t <window-number>

# åˆ‡æ¢åˆ°æŒ‡å®šåç§°çš„çª—å£
tmux select-window -t <window-name>
```

* é‡å‘½åçª—å£

```bash
tmux rename-window <new-name>
```

* çª—å£å¿«æ·é”®
	 - `Ctrl+b c`ï¼šåˆ›å»ºä¸€ä¸ªæ–°çª—å£ï¼ŒçŠ¶æ€æ ä¼šæ˜¾ç¤ºå¤šä¸ªçª—å£çš„ä¿¡æ¯ã€‚

	 - `Ctrl+b p`ï¼šåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£ï¼ˆæŒ‰ç…§çŠ¶æ€æ ä¸Šçš„é¡ºåºï¼‰ã€‚
   - `Ctrl+b n`ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£ã€‚
   - `Ctrl+b <number>`ï¼šåˆ‡æ¢åˆ°æŒ‡å®šç¼–å·çš„çª—å£ï¼Œå…¶ä¸­çš„`<number>`æ˜¯çŠ¶æ€æ ä¸Šçš„çª—å£ç¼–å·ã€‚
   - `Ctrl+b w`ï¼šä»åˆ—è¡¨ä¸­é€‰æ‹©çª—å£ã€‚
   - `Ctrl+b ,`ï¼šçª—å£é‡å‘½åã€‚
   - `Ctrl+b x`ï¼šå…³é—­å½“å‰çª—å£

### é€šé“

åœ¨ä¸€ä¸ªtmuxä¸­ï¼Œç»§ç»­åˆ›å»ºä¸€ä¸ªé€šé“ã€‚

```sh
tmux -S Path  #Pathéšä¾¿å†™ä¸€ä¸ªåç§°å°±è¡Œ ç›´æ¥å†™tempï¼Œä¼šåˆ›å»ºä¸€ä¸ªtempæ–‡ä»¶
tmux -S temp a -t  #

tmux -S /path/to/socket list-sessions
#ç®€åŒ–
tmux -S /path/to/socket ls
tmux -S /path/to/socket kill-session -t #åˆ é™¤
```

### é…ç½®æ–‡ä»¶

`.tmux.conf` é€šç”¨é…ç½®æ–‡ä»¶

ç”¨æˆ·çº§åˆ«é…ç½®tmuxé…ç½®æ–‡ä»¶é»˜è®¤åœ¨`~/.tmux.conf`ï¼Œå¦‚æœå­˜åœ¨ä¼šä¼˜å…ˆè¯»å–è¿™ä¸ªæ–‡ä»¶

```sh

# è®¾ç½®æ–°å‰ç¼€ä¸º Ctrl+a
set -g prefix2 C-a
bind C-a send-prefix -2
#é¼ æ ‡ç‚¹å‡»
set -g mouse on
# çŠ¶æ€æ åˆ·æ–°æ—¶é—´
set -g status-interval 1

# æ·»åŠ è½½åœ¨é…ç½®æ–‡ä»¶æŒ‡ä»¤ä¸º
unbind '"'
bind - splitw -v -c '#{pane_current_path}' # å‚ç›´æ–¹å‘æ–°å¢é¢æ¿ï¼Œé»˜è®¤è¿›å…¥å½“å‰ç›®å½•
unbind %
bind =  splitw -h -c '#{pane_current_path}' # æ°´å¹³æ–¹å‘æ–°å¢é¢æ¿ï¼Œé»˜è®¤è¿›å…¥å½“å‰ç›®å½•
bind r source-file ~/.tmux.conf \; display-message "Config reloaded.."
bind -r k select-pane -U # ç»‘å®škä¸ºâ†‘
bind -r j select-pane -D # ç»‘å®šjä¸ºâ†“
bind -r h select-pane -L # ç»‘å®šhä¸ºâ†
bind -r l select-pane -R # ç»‘å®šlä¸ºâ†’

# å¤åˆ¶æ¨¡å¼æ›´æ”¹ä¸º vi é£æ ¼
# # è¿›å…¥å¤åˆ¶æ¨¡å¼ å¿«æ·é”®ï¼šprefix + [
setw -g mode-keys vi # å¼€å¯vié£æ ¼åï¼Œæ”¯æŒviçš„C-dã€C-uã€hjklç­‰å¿«æ·é”®
# --------------------------------------------------- session pane -----------------------------------------------------------

set -g base-index 1 # è®¾ç½®çª—å£çš„èµ·å§‹ä¸‹æ ‡ä¸º1
set -g pane-base-index 1 # è®¾ç½®é¢æ¿çš„èµ·å§‹ä¸‹æ ‡ä¸º1

# å¯ä»¥è®©æˆ‘ä»¬ç”¨Alt 123 å»åˆ‡æ¢Window
unbind n
unbind p
unbind 0
unbind 1
unbind 2
unbind 3
unbind 4
unbind 5
unbind 6
unbind 7
unbind 8
unbind 9
unbind 0
bind -r C-p previous-window
bind -r C-n next-window

bind -n M-1 select-window -t 0
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# pane navigation
bind 1 select-pane -t:.1
bind 2 select-pane -t:.2
bind 3 select-pane -t:.3
bind 4 select-pane -t:.4
bind 5 select-pane -t:.5
bind 6 select-pane -t:.6
bind 7 select-pane -t:.7
bind 8 select-pane -t:.8
bind 9 select-pane -t:.9
bind 0 select-pane -t:.10
# --------------------------------------------------- å…¶ä»– -----------------------------------------------------------
set -s focus-events on
set-window-option -g automatic-rename on
set-window-option -g monitor-activity on

# --------------------------------------------------- çŠ¶æ€æ  -----------------------------------------------------------
set -wg window-status-format " #I #W " # çŠ¶æ€æ çª—å£åç§°æ ¼å¼
set -wg window-status-current-format " #I:#W#F " # çŠ¶æ€æ å½“å‰çª—å£åç§°æ ¼å¼(#Iï¼šåºå·ï¼Œ#wï¼šçª—å£åç§°ï¼Œ#Fï¼šé—´éš”ç¬¦)
set -wg window-status-separator "" # çŠ¶æ€æ çª—å£åç§°ä¹‹é—´çš„é—´éš”
set -g message-style "bg=#202529, fg=#91A8BA" # æŒ‡å®šæ¶ˆæ¯é€šçŸ¥çš„å‰æ™¯ã€åæ™¯è‰²

#è‡ªå®šä¹‰çŠ¶æ€æ 
#set -g status-right '#[fg=green]#H #[fg=blue]%Y-%m-%d %H:%M'

# è‡ªå®šä¹‰çŠ¶æ€æ 
set -g status-interval 1 # çŠ¶æ€æ åˆ·æ–°æ—¶é—´
set -g status-justify left # çŠ¶æ€æ åˆ—è¡¨å·¦å¯¹é½
setw -g monitor-activity on # éå½“å‰çª—å£æœ‰å†…å®¹æ›´æ–°æ—¶åœ¨çŠ¶æ€æ é€šçŸ¥

# set -g status-left "Zorn #W" # çŠ¶æ€æ å·¦ä¾§å†…å®¹
# # set -g status-fg yellow # è®¾ç½®çŠ¶æ€æ å‰æ™¯é»„è‰²
# # set -g status-style "bg=black, fg=yellow" # çŠ¶æ€æ å‰æ™¯èƒŒæ™¯è‰²
#
# # set -g status-right 'zorn@machine #{continuum_status}' # çŠ¶æ€æ å³ä¾§å†…å®¹
# # set -g status-left-length 300 # çŠ¶æ€æ å·¦è¾¹é•¿åº¦300
# # set -g status-right-length 500 # çŠ¶æ€æ å·¦è¾¹é•¿åº¦500
#
# # set -wg window-status-current-style "bg=black" # çŠ¶æ€æ å½“å‰çª—å£åç§°çš„æ ·å¼
# # set -wg window-status-current-style "bg=red" # çŠ¶æ€æ å½“å‰çª—å£åç§°çš„æ ·å¼
# # set -wg window-status-last-style "fg=red" # çŠ¶æ€æ æœ€åä¸€ä¸ªçª—å£åç§°çš„æ ·å¼
set -g status-left "ğŸ¶ #W" # çŠ¶æ€æ å·¦ä¾§å†…å®¹
```



### å…¶ä»–

```bash
# åˆ—å‡ºæ‰€æœ‰å¿«æ·é”®ï¼ŒåŠå…¶å¯¹åº”çš„ Tmux å‘½ä»¤
tmux list-keys

# åˆ—å‡ºæ‰€æœ‰ Tmux å‘½ä»¤åŠå…¶å‚æ•°
tmux list-commands

# åˆ—å‡ºå½“å‰æ‰€æœ‰ Tmux ä¼šè¯çš„ä¿¡æ¯
tmux info

# é‡æ–°åŠ è½½å½“å‰çš„ Tmux é…ç½®
tmux source-file ~/.tmux.conf
```

[Tmux ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)](https://www.ruanyifeng.com/blog/2019/10/tmux.html)
